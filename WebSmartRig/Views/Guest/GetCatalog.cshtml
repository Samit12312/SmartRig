@using Models
@model CatalogViewModel
@{
    ViewData["Title"] = "ComputersCatalog";
    Layout = "~/Views/Shared/MasterPage.cshtml";
}
<link href="~/stylesheet/computercatalog.css" rel="stylesheet" />

<script>
    function GoLink() {
        document.getElementById("filterForm").submit();
    }
</script>

<div class="catalog-container">
    <aside class="filters">
        <form action="http://localhost:5036/Guest/GetCatalog/" method="get" id="filterForm">

            <h3>Computer Type</h3>
            <select name="typeId" onchange="GoLink()">
                <option value="">All Types</option>
                @foreach (Models.Type type in Model.Types)
                {
                    if (Model.TypeId == type.TypeId)
                    {
                        <option value="@type.TypeId" selected="selected">@type.TypeName</option>
                    }
                    else
                    {
                        <option value="@type.TypeId">@type.TypeName</option>
                    }
                }

            </select>

                <h3>Company</h3>
                <select name="companyId" onchange="GoLink()">
                    <option value="">All Companies</option>
                    @foreach (Company company in Model.Companys)
                    {
                        if (Model.CompanyId == company.CompanyId)
                        {
                            <option value="@company.CompanyId" selected="selected">@company.CompanyName</option>
                        }
                        else
                        {
                            <option value="@company.CompanyId">@company.CompanyName</option>
                        }
                    }
                </select>

            <h3>Operating System</h3>
            <select name="operatingSystemId" onchange="GoLink()">
                <option value="">All OS</option>
                @foreach (Models.OperatingSystem os in Model.operatingSystems)
                {
                    if (Model.OperatingSystemId == os.OperatingSystemId)
                    {
                        <option value="@os.OperatingSystemId" selected="selected">@os.OperatingSystemName</option>
                    }
                    else
                    {
                        <option value="@os.OperatingSystemId">@os.OperatingSystemName</option>
                    }
                }
            </select>

            <h3>Price Range</h3>
            <input type="number" name="minPrice" placeholder="Min $" value="@(Model.MinPrice?.ToString() ?? "")" />
            <input type="number" name="maxPrice" placeholder="Max $" value="@(Model.MaxPrice?.ToString() ?? "")" />

            <h3>Sort by Price</h3>
            <label>
                <input type="radio" name="priceSort" value="1" onchange="GoLink()"
                       @(Model.PriceSort == 1 ? "checked" : "")> Low to High
            </label><br />
            <label>
                <input type="radio" name="priceSort" value="2" onchange="GoLink()"
                       @(Model.PriceSort == 2 ? "checked" : "")> High to Low
            </label>

            <button type="submit">Apply Filters</button>
        </form>
    </aside>

    <main class="computers">
        @foreach (var computer in Model.Computers)
        {
            <div class="computer-card">
                <a href="http://localhost:5036/Guest/GetComputer/?computerId=@computer.Id">
                    <img src="http://localhost:7249/Images/Computers/@computer.ComputerPicture" />
                </a>
                <h1>@computer.ComputerName</h1>
                <p>
                    CPU: @computer.Cpu <br />
                    GPU: @computer.Gpu <br />
                    RAM: @computer.Ram <br />
                    Storage: @computer.Storage <br />
                    OS: @computer.OperatingSystem
                </p>
                <span class="price">$@computer.Price</span>
            </div>
        }
    </main>
</div>
